---
title: HTTP Proxy 的工作原理是什么？
category: 网络协议
date: 2025-07-09 21:23
difficulty: 中等
excerpt: HTTP 代理服务器作为中间件，转发客户端请求到目标服务器。它通过拦截、解析和转发 HTTP 请求，实现数据缓存与响应，主要应用于加速访问、解决跨域问题及安全优化。
tags:
- HTTP
- 代理
- Proxy
---
HTTP 代理是一种中间服务器，它在客户端和目标服务器之间转发 HTTP 请求和响应。它的核心原理是利用代理服务器作为通信桥梁，通过以下步骤处理流程：

1. **请求拦截**：当客户端在浏览器或应用中设置了代理服务器后，所有 HTTP 请求都不直接发送到目标服务器，而是先发送给代理服务器。
   
2. **请求转发**：代理服务器接收并解析客户端的原始请求后，根据配置路径（如规则定义 `'/api' → target_url`），转发请求到目标服务器：
   ```JavaScript
   // 简化的代理设置示例（例如通过 node.js）
   const express = require('express');
   const proxy = require('http-proxy-middleware');
   const app = express();
   app.use('/api', proxy({ target: 'http://api.target.com', changeOrigin: true }));
   app.listen(8000);
   ```

3. **数据缓取与响应**：目标服务器响应数据到代理服务器后，代理会临时存储这些数据（支持缓存以减少重复请求），并最终将响应数据转发给客户端。

其主要应用优势包括：
- **加速访问**：代理服务器本地存储（缓存）热点数据，例如重复访问相同站点时可跳过远程取数，提升响应速度（如摘要 3 所述）。
- **解决跨域问题**：在 web 开发中，代理让客户端与代理服务器属于同源（域名/协议/端口），避免跨域限制；而代理服务器与服务端是服务端间通信，无跨域问题（常用于 Webpack proxy）。
- **安全优化**：作为匿名或防火墙屏障，可过滤敏感内容或掩蔽客户 IP 地址；对 HTTPS 代理场景还可处理 TLS 证书协商（但需正确代理设置规避安全问题）。
