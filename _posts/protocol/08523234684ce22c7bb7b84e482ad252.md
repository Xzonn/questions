---
title: HTTP 状态码 502 和 504 有什么区别？
category: 网络协议
date: 2025-07-08 11:41
difficulty: 中等
excerpt: HTTP 状态码 502（Bad Gateway）和 504（Gateway Timeout）的区别在于前者表示中间服务器收到无效响应，后者表示等待上游服务器响应超时。
tags:
- HTTP
- 状态码
- HTTP状态码
---
HTTP 状态码502 (Bad Gateway) 和504 (Gateway Timeout) 均属于服务器端错误类别（5XX），常用于反向代理或网关架构中，但两者在含义和原因上存在关键差异。  

- **502 Bad Gateway**:  
  - 表示中间服务器（如网关或代理）在执行请求时，从上游服务器（e.g., 应用程序服务器）接收到一个无效、破坏或不兼容的响应。  
  - 典型原因：  
    - 上游服务器配置错误或无功能（程序崩溃）。  
    - 上游返回了非标准或不完整响应（报文结构错误）。  
    - 常见场景：当 CDN 或反向代理（e.g., Nginx, CDN）无法解析上游服务时。  

- **504 Gateway Timeout**:  
  - 表示中间服务器在预设超时时间内（e.g., 反向代理配置的读超时），未能接收到上游服务器的任何响应。  
  - 典型原因：  
    - 上游服务器处理时间超时（系统过载或慢处理）。  
    - 网络连接问题或延迟阻塞了响应传输。  
    - 常见场景：高并发系统或网络拥塞导致的延时问题。  

**主要区别：**  
- **响应本质不同**：502表明收到了不正常的响应内容（内容本身无效），504则未收到任何响应（超时问题）。  
- **故障侧重点**：502暗示上游服务可能存但在逻辑缺陷（修复问题或重启），504意味着上游不可访问或不堪响应（处理资源不足/网络瓶颈）。  
- **解决策略**：排查502可重点审核上游服务器错误日志和代理配置；排查504需优化响应延时、增置超时容限和流量控制。
