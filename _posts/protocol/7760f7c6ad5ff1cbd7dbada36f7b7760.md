---
title: TCP 是如何保证可靠性的？
category: 网络协议
date: 2025-07-09 20:54
difficulty: 中等
excerpt: TCP 采用多种机制确保数据传输的可靠性，包括连接管理、序列号确认、校验和、重传机制、流量控制和拥塞控制。这些机制共同作用以实现可靠的数据传输。
tags:
- TCP
- 可靠性
- TCP/IP
---
TCP（Transmission Control Protocol）通过以下核心机制确保数据传输的可靠性：
1.  **连接管理**: 建立连接时使用三次握手过程，确保通信双方状态一致；终止连接使用四次挥手，安全释放资源。
2.  **序列号和确认应答（ACK）**: 
    *   数据被分割成段，每个段分配序列号，接收方根据序列号排序数据确保有序交付。
    *   接收方收到数据后返回ACK 报文，携带确认序列号指示下一次传输位置；如果没有ACK，发送方重新发送。
3.  **校验和**: 
    *   TCP 头部和数据部分计算16 位整数校验和（即反码求和）。
    *   接收方比对校验和：如果错误则丢弃数据并触发重传。
4.  **重传机制**:
    *   **超时重传**: 发送方为每个段启动计时器（RTO），超时未收到ACK 立即重发。
    *   **快速重传**: 收到多个重复ACK 时视为丢包，迅速重发丢失数据避免等待。
5.  **流量控制**:
    *   利用滑动窗口机制控制发送速率：接收方通过ACK 报文告知可用窗口大小，避免接收缓冲区溢出。
6.  **拥塞控制**:
    *   算法如慢启动、拥塞避免、快速恢复和快速重传动态调整数据量。
    *   基于拥塞窗口（cwnd）量化网络承载能力，在检测到丢包或延迟时减缓发送速率。
7.  **数据分片管理**: 
    *   通过 MSS（Maximum Segment Size）将数据分段，减少 IP 层分片，提升传输效率和可靠性。
