---
title: 你了解 HTTP 1.1 中的 Keep-Alive 功能吗？
category: 网络协议
date: 2025-07-09 20:36
difficulty: 中等
excerpt: Keep-Alive 是一种 HTTP 连接管理机制，允许在一个 TCP 连接上发送多个请求和响应，以减少连接开销。
tags:
- HTTP
- 性能优化
- 网络
---
HTTP 1.1 中的 keep-alive 是一种连接管理机制，它允许在一个 TCP 连接上发送和接收多个 HTTP 请求和响应，从而减少连接建立和关闭的开销。

主要作用包括：

- **TCP 连接复用**：keep-alive 将 TCP 连接保持在活动状态，使得客户端可以在该连接上串行地发送多个请求（例如加载多个图片或 CSS 文件），而无需为每条请求重新建立连接（省去了 TCP 的三次握手和四次挥手）。
- **降低时延和资源消耗**：减少连接创建的时间和资源浪费，包括节约服务端处理量及客户端等待响应产生的多余网络流量；每次通信无需重建立连结能加速网页整体加载成效近 1 次延迟免除就可累积节省至少 20% 延时。
- **优化网络性能**：持续连接启用可避免每次传输再初始化及 TCP slow-start 拥控机制重置从而加速文件送达时间达较理想流畅速度段（能高效支持类似网页完整内容包含上百个文件而不增加请求耗时）。

工作机制：

默认在 HTTP 1.1 起就已开启该功能（不像 HTTP 1.0 还要特写附加 header `Connection: keep-alive`），通常维持一段预设闲置时间或允许最大连续资源条数后再终止如未新增则逐步自动关闭掉该 socket 连接。

局限说明：

注意该保持策略需各环节都支持才启用有效——由于每个连接内需依次串行解析请处理：遇到慢响应等延时会阻塞后头申请等待并构成 Head of-Line-Blocking（行头部阻塞）从而约束并发量；部份应用程序为此使用多个并发 connection (比如浏览同主机限制 6个 TCP 同复用链接最多并行取资源以达到部分改善作用效果但并非根解效能)。

使用示例头标记：

实际请求如客户端可添加字段：

```http
GET /resource HTTP/1.1
Connection: keep-alive
```

服务器回应用相同表态头确认：

```http
HTTP/1.1 200 OK
Connection: keep-alive
```
