---
title: 你了解 shell 脚本中的 ${} 和 $() 吗？
category: 部署与运维
date: 2025-07-09 20:49
difficulty: 中等
excerpt: 在 Shell 脚本中，${} 用于变量替换和字符串操作，而 $() 则用于执行命令并捕获输出。理解它们的区别对于编写高效的脚本很重要。
tags:
- shell
- 变量替换
- 命令替换
---
在 shell 脚本中，`${}` 和 `$()` 是两类常用于变量或命令处理的语法结构。

1. **${} (变量替换)**:
   - ${} 主要用于变量的访问或加工处理，比单写 $ 变量更精确，可以处理涉及边界的场景。
   - 基本用法：`$var` 等价于 `${var}`，但如果变量名后接有其他字符时，需用 `${}` 明确区分，如 `echo ${var}text` 输出变量值连 text，而不是 `$vartext`。
   - 支持字符串操作：
     ```bash
     file="/dir1/dir2/file.txt"
     echo ${file##*/}  # 输出 "file.txt"，移除从右起第一个 "/" 及之前的字符
     ```
   - 常用于数组访问：`${array[index]}` 获取数组元素。

2. **$() (命令替换)**:
   - $() 用于执行一个命令并捕获其标准输出结果，等价于反引号 \`\`。
   - 基本用法：将命令执行结果嵌入命令行或赋值给变量，如：
     ```bash
     version=$(uname -r)  # 相当于 uname -r 的输出保存在 version 变量
     echo "Current date is $(date)"  # 替换为当前日期字符串
     ```
   - 支持管道和多行命令：
     ```bash
     files=$(find . -name "*.txt" | sort)
     ```
     这优先于反引号，因为嵌套使用时更易读且错误少。

简单区别：`${}` 操作变量值（字符串级别处理），`$()` 操作命令执行结果（产生新内容输出）。
